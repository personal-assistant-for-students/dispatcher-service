# Dispatcher API

## Введение

Dispatcher API - это сервис, предназначенный для работы как связующее звено между пользовательскими интерфейсами и микросервисами персонального ассистента. Этот сервис обеспечивает централизованное управление запросами и распределение задач между различными компонентами системы.

## Требования
Для работы проекта необходимы следующие библиотеки и зависимости:
- pyTelegramBotAPI
- requests
- telebot_calendar

# Архитектура
Dispatcher API разработан для предоставления единообразного и масштабируемого способа обработки запросов от пользовательских интерфейсов и их маршрутизации к соответствующим микросервисам. На боевой модели перед диспетчером будет будет находится load balancer.

# API Task Manager
- GET /tasks
    - Получение списка всех **не выполненных** задач.
    - Входные параметры: нет
    - Ответ: список задач


- POST /tasks
  - Создание новой задачи.
  - Входные параметры: 
    - title (название задачи);
    - content (содержание);
    - deadline (дата окончания).
  - Ответ: информация о созданной задаче


- PUT /tasks/{task_id}
  - Обновление задачи.
  - Входные параметры:
    - task_id (идентификатор задачи);
    - status
  - Ответ: обновленная информация о статусе задаче

## Установка и настройка
Чтобы установить необходимые зависимости, выполните:  
```pip install -r requirements.txt```

## Запуск проекта на MacOS и Linux
Чтобы запустить Task Manager на MacOS и Linux, выполните следующие шаги:

- Получите telegram токен бота которого вы планируете интегрировать 
- Откройте терминал.
- Перейдите в директорию проекта dispatcher-service.
- Запустите скрипт **localRun.sh** следующей командой:  
```bash ./localRun.sh```
- Этот скрипт автоматически настроит и запустит все необходимые службы для работы дисппетчера. Убедитесь, что у вас установлены все необходимые зависимости, указанные в файле requirements.txt.

## Информация о Telegram боте
Dispatcher API интегрирован с Telegram ботом, который предоставляет удобный пользовательский интерфейс для взаимодействия с вашим сервисом.

_на данный момент токен подставляется в ручную, на боевой модели для этого будет использовать vault_

# Адрес Telegram бота
Вы можете взаимодействовать с нашим telegram ботом во время тестов, найдя его в Telegram по следующему имени: @pafs_2023_bot

_на данный момент бот активен только во время тестовых периодов_

# Основные функции и команды бота
- /start: Начало работы с ботом. Бот предложит основные варианты действий.
- /new: Создание новой задачи. После этой команды следуйте инструкциям бота для ввода деталей задачи.
- /tasks: Получение списка текущих задач. Бот отобразит список задач с ключевой информацией и сортировкой по дедлайнам.

## Тестирование
Тесты находятся в папке:
- tests

Для запуска тестов выполните:
```python -m unittest```
